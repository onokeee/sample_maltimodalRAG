#!/bin/bash

echo "========================================"
echo " マルチモーダルRAGシステム 起動"
echo "========================================"
echo

# 仮想環境の存在チェック
if [ ! -d "venv" ]; then
    echo "[エラー] 仮想環境が見つかりません"
    echo "まず ./setup.sh を実行してセットアップしてください"
    echo
    exit 1
fi

# 仮想環境のアクティベート
echo "[処理] 仮想環境をアクティベート中..."
source venv/bin/activate

# 環境チェックとアプリ起動
echo "[処理] 環境チェック中..."
python run.py

# エラーが発生した場合
if [ $? -ne 0 ]; then
    echo
    echo "[情報] エラーが発生しました"
    echo "トラブルシューティング:"
    echo "1. ./setup.sh を再度実行してみてください"
    echo "2. .env ファイルにAPIキーが設定されているか確認してください"
    echo "3. または、アプリ起動後にサイドバーからAPIキーを入力してください"
    echo
fi
